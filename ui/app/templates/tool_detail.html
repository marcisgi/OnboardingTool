{% extends "base.html" %}
{% block content %}
<section class="relative min-h-[70vh]">
  <div class="absolute inset-0 rounded-2xl bg-slate-900/60"></div>
  <div class="relative ml-auto w-full max-w-2xl rounded-2xl border border-slate-200 bg-white p-8 shadow-xl dark:border-slate-800 dark:bg-slate-900">
    <div class="flex items-start justify-between">
      <div class="flex items-start gap-4">
        <div class="flex h-16 w-16 items-center justify-center overflow-hidden rounded-2xl border border-slate-200 bg-slate-50 dark:border-slate-800 dark:bg-slate-900">
        {% if tool.has_logo %}
        <img src="/logos/{{ tool.id }}" alt="{{ tool.title }} logo" class="h-full w-full object-cover" />
        {% else %}
        <span class="text-3xl font-bold text-indigo-500">{{ tool.title[:1] }}</span>
        {% endif %}
      </div>
      <div class="flex-1">
        <div class="flex items-center gap-3">
          <h2 class="text-xl font-semibold">{{ tool.title }}</h2>
          <span class="rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-700">{{ tool.status }}</span>
          <span class="text-xs text-slate-500">{{ tool.category }}</span>
        </div>
      </div>
      </div>
      <a href="/" class="text-slate-400 hover:text-slate-600">âœ•</a>
    </div>
    <div class="mt-4">
      <form method="post" action="/tools/{{ tool.id }}/open">
        <input type="hidden" name="tool_title" value="{{ tool.title }}" />
        <input type="hidden" name="tool_url" value="{{ tool.tool_url or '' }}" />
        {% if tool.status == "Planned" or not tool.tool_url %}
        <button type="button" disabled class="w-full cursor-not-allowed rounded-lg bg-slate-200 px-4 py-2 text-sm font-semibold text-slate-500 dark:bg-slate-700 dark:text-slate-400">Open {{ tool.title }}</button>
        {% else %}
        <button type="submit" class="w-full rounded-lg bg-slate-800 px-4 py-2 text-sm font-semibold text-white">Open {{ tool.title }}</button>
        {% endif %}
      </form>
    </div>

    <div class="mt-6 space-y-6">
      <div>
        <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-500">About</h3>
        <div class="mt-2 text-sm text-slate-600 dark:text-slate-300">
          {{ tool.description | safe if tool.description else "No description provided." }}
        </div>
      </div>
      <div>
        <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-500">How to get access</h3>
        <div class="mt-2 rounded-xl border border-slate-200 bg-slate-50 p-3 text-sm dark:border-slate-800 dark:bg-slate-800/50">
          <p class="font-semibold">{{ tool.access_owner_name or "Access Approver" }}</p>
          <p class="text-xs text-slate-500">{{ tool.access_owner_email or "" }}</p>
        </div>
        <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">{{ tool.access_process or "No access process provided." }}</p>
      </div>
      <div>
        <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-500">Who to ask</h3>
        <div class="mt-2 space-y-2">
          {% for expert in tool.experts %}
          <div class="rounded-xl border border-slate-200 bg-white p-3 text-sm dark:border-slate-800 dark:bg-slate-900">
            <p class="font-semibold">{{ expert.name }}</p>
            <p class="text-xs text-slate-500">{{ expert.email }}</p>
          </div>
          {% else %}
          <p class="text-sm text-slate-500">No experts listed.</p>
          {% endfor %}
        </div>
      </div>
      <div>
        <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-500">Documentation</h3>
        <div class="mt-2 space-y-2">
          {% for link in tool.documentation_links %}
          <a class="flex items-center justify-between rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm dark:border-slate-800 dark:bg-slate-900" href="{{ link.url }}" target="_blank" rel="noreferrer">
            <span>{{ link.title }}</span>
            <span class="text-xs text-slate-400">Docs</span>
          </a>
          {% else %}
          <p class="text-sm text-slate-500">No docs available.</p>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
